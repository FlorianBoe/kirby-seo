(function(){"use strict";var k=function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.value?t("div",{staticClass:"k-heading-structure"},[t("div",{staticClass:"k-heading-structure-label k-field-label"},[t("k-icon",{attrs:{type:"headline"}}),t("span",[e._v(e._s(e.label||e.$t("heading-structure")))]),e.isLoading?t("k-loader"):e._e()],1),t("k-box",{attrs:{theme:""}},[t("ol",{staticClass:"k-heading-structure-list"},e._l(e.value,function(r,i){return t("li",{key:i,class:"k-heading-structure-item level-"+r.level+" "+(e.itemInvalid(r,i)?"is-invalid":""),style:"z-index: "+(e.value.length-i)},[t("span",{staticClass:"k-heading-structure-item-level"},[e._v("H"+e._s(r.level))]),t("span",{staticClass:"k-heading-structure-item-text"},[e._v(e._s(r.text))])])}),0)]),e.incorrectOrder&&!e.noH1?t("k-box",{staticClass:"k-heading-structure-notice",attrs:{theme:"negative"}},[t("k-icon",{attrs:{type:"alert"}}),t("k-text",[e._v(e._s(e.$t("incorrect-heading-order")))])],1):e._e(),e.multipleH1?t("k-box",{staticClass:"k-heading-structure-notice",attrs:{theme:"negative"}},[t("k-icon",{attrs:{type:"alert"}}),t("k-text",[e._v(e._s(e.$t("multiple-h1-tags")))])],1):e._e(),e.noH1?t("k-box",{staticClass:"k-heading-structure-notice",attrs:{theme:"negative"}},[t("k-icon",{attrs:{type:"alert"}}),t("k-text",[e._v(e._s(e.$t("missing-h1-tag")))])],1):e._e()],1):e._e()},m=[],te="";function l(e,s,t,r,i,d,g,Y){var a=typeof e=="function"?e.options:e;s&&(a.render=s,a.staticRenderFns=t,a._compiled=!0),r&&(a.functional=!0),d&&(a._scopeId="data-v-"+d);var o;if(g?(o=function(n){n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!n&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(n=__VUE_SSR_CONTEXT__),i&&i.call(this,n),n&&n._registeredComponents&&n._registeredComponents.add(g)},a._ssrRegister=o):i&&(o=Y?function(){i.call(this,(a.functional?this.parent:this).$root.$options.shadowRoot)}:i),o)if(a.functional){a._injectStyles=o;var Z=a.render;a.render=function(ee,f){return o.call(f),Z(ee,f)}}else{var h=a.beforeCreate;a.beforeCreate=h?[].concat(h,o):[o]}return{exports:e,options:a}}const w={data(){return{label:null,value:null,isLoading:!0}},created(){this.isLoading=!0,this.load().then(e=>{this.label=e.label}),this.handleLoad(),this.debouncedLoad=this.$helper.debounce(e=>{this.handleLoad(e)},200)},computed:{changes(){return this.$store.getters["content/changes"]()},incorrectOrder(){var e;return(e=this.value)==null?void 0:e.some((s,t)=>{var r,i;return s.level>((i=(r=this.value[t-1])==null?void 0:r.level)!=null?i:0)+1})},multipleH1(){var e;return((e=this.value)==null?void 0:e.filter(s=>s.level===1).length)>1},noH1(){var e;return((e=this.value)==null?void 0:e.filter(s=>s.level===1).length)===0}},methods:{async handleLoad(e){this.isLoading=!0;const s=this.parent.toString().split("/").pop(),t=await this.$api.post(`/k-seo/${s}/heading-structure`,e!=null?e:this.changes);this.value=t,this.isLoading=!1},itemInvalid(e,s){var t,r;return!!(e.level>((r=(t=this.value[s-1])==null?void 0:t.level)!=null?r:0)+1||e.level===1&&this.value[s-1]||e.level===1&&this.value.filter(i=>i.level===1).length>1)}},watch:{changes(e){this.debouncedLoad(e)}}},_={};var b=l(w,k,m,!1,y,null,null,null);function y(e){for(let s in _)this[s]=_[s]}var $=function(){return b.exports}(),C=Object.freeze(Object.defineProperty({__proto__:null,default:$},Symbol.toStringTag,{value:"Module"})),S=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"k-facebook-preview"},[t("div",{staticClass:"k-facebook-preview__image"},[t("img",{staticClass:"k-facebook-preview__img",attrs:{src:e.ogImage}})]),t("div",{staticClass:"k-facebook-preview__content"},[t("span",{staticClass:"k-facebook-preview__url"},[e._v(e._s(e.host))]),t("span",{staticClass:"k-facebook-preview__title"},[e._v(e._s(e.ogTitle))]),t("p",{staticClass:"k-facebook-preview__description"},[e._v(e._s(e.ogDescription))])])])},L=[],se="";const x={props:{ogTitle:String,url:String,ogDescription:String,ogImage:String},computed:{host(){return new URL(this.url).host}}},c={};var T=l(x,S,L,!1,O,null,null,null);function O(e){for(let s in c)this[s]=c[s]}var I=function(){return T.exports}(),P=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"k-google-search-preview"},[t("span",{staticClass:"k-google-search-preview__url"},[t("span",[e._v(e._s(e.origin))]),e._l(e.breadcrumbs,function(r,i){return t("span",{key:i,staticClass:"k-google-search-preview__url__breadcrumb"},[e._v(" "+e._s(r)+" ")])})],2),t("h2",{staticClass:"k-google-search-preview__headline"},[e._v(e._s(e.title))]),t("p",{staticClass:"k-google-search-preview__paragraph"},[e._v(" "+e._s(e.description)+" ")])])},R=[],re="";const j={props:{title:String,url:String,description:String},computed:{origin(){return new URL(this.url).origin},breadcrumbs(){return this.url.split("/").slice(3)}}},u={};var F=l(j,P,R,!1,E,null,null,null);function E(e){for(let s in u)this[s]=u[s]}var M=function(){return F.exports}(),z=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("div",{staticClass:"k-twitter-preview",class:{"is-horizontal":e.twitterCardType!=="summary_large_image"||!e.ogImage}},[t("div",{staticClass:"k-twitter-preview__image"},[t("img",{staticClass:"k-twitter-preview__img",class:{"is-hidden":!e.ogImage},attrs:{src:e.ogImage}})]),t("div",{staticClass:"k-twitter-preview__content"},[t("span",{staticClass:"k-twitter-preview__url"},[e._v(e._s(e.host))]),t("span",{staticClass:"k-twitter-preview__title"},[e._v(e._s(e.ogTitle))]),t("p",{staticClass:"k-twitter-preview__description"},[e._v(e._s(e.ogDescription))])])]),e.twitterCardType==="summary_large_image"&&!e.ogImage?t("k-box",{staticClass:"k-twitter-preview-notice",attrs:{theme:"info"}},[t("k-icon",{attrs:{type:"alert"}}),t("k-text",[e._v(e._s(e.$t("twitter-card-type-not-respected")))])],1):e._e()],1)},H=[],ie="";const U={props:{ogTitle:String,url:String,ogDescription:String,twitterCardType:String,ogImage:String},computed:{host(){return new URL(this.url).host}}},v={};var D=l(U,z,H,!1,G,null,null,null);function G(e){for(let s in v)this[s]=v[s]}var N=function(){return D.exports}(),V=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"k-seo-preview"},[t("k-select-field",{attrs:{label:"Preview",type:"select",options:e.options,empty:!1},model:{value:e.type,callback:function(r){e.type=r},expression:"type"}}),e.value?t("div",{staticClass:"k-seo-preview__inner"},[e.type==="google"?t("google-preview",e._b({},"google-preview",e.value,!1)):e._e(),e.type==="twitter"?t("twitter-preview",e._b({},"twitter-preview",e.value,!1)):e._e(),e.type==="facebook"?t("facebook-preview",e._b({},"facebook-preview",e.value,!1)):e._e()],1):e._e()],1)},X=[],ae="";const W={components:{GooglePreview:M,TwitterPreview:N,FacebookPreview:I},data(){var s;const e=(s=localStorage.getItem("kSEOPreviewType"))!=null?s:"google";return{label:null,value:null,type:e}},created(){this.isLoading=!0,this.load().then(e=>{this.label=e.label}),this.handleLoad(),this.debouncedLoad=this.$helper.debounce(e=>{this.handleLoad(e)},200)},computed:{changes(){return this.$store.getters["content/changes"]()},options(){return[{value:"google",text:"Google"},{value:"twitter",text:"Twitter"},{value:"facebook",text:"Facebook"}]}},methods:{async handleLoad(e){this.isLoading=!0;const s=this.parent.toString().split("/").pop(),t=await this.$api.post(`/k-seo/${s}/seo-preview`,e!=null?e:this.changes);this.value=t,this.isLoading=!1}},watch:{changes(e){this.debouncedLoad(e)},type(){localStorage.setItem("kSEOPreviewType",this.type)}}},p={};var q=l(W,V,X,!1,A,null,null,null);function A(e){for(let s in p)this[s]=p[s]}var B=function(){return q.exports}(),J=Object.freeze(Object.defineProperty({__proto__:null,default:B},Symbol.toStringTag,{value:"Module"}));const K=e=>e.substring(e.lastIndexOf("/")+1,e.lastIndexOf(".")).toLowerCase(),Q=Object.freeze({import(e){return Object.entries(e).reduce((s,[t,r])=>(s[K(t)]=r.default,s),{})}});panel.plugin("tobimori/seo",{sections:Q.import({"./sections/heading-structure.vue":C,"./sections/seo-preview.vue":J})})})();
